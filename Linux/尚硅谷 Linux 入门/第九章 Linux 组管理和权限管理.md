# Linux 组管理和权限管理
## Linux 组的基本介绍
1. 在 Linux 中的每个用户必须属于一个组，不能独立于组外。
2. 在 Linux 中每个文件有所有者、所在组、其他组的概念。
    - 所有者
    - 所在组
    - 其他组
    - 改变用户所在的组

## 文件/目录所有者
1. 概述
    - 文件/目录所有者：一般为文件的创建者，谁创建了该文件，就自然的成为该文件的所有者。

### 查看文件的所有者
1. ls -ahl 指令
```
(1) ls -ahl # 查看文件的所有者
```

### 修改文件所有者
1. chown 指令
```
(1) chown 用户名 文件名 # 修改文件所有者
``` 

## 组的创建
1. groupadd 指令
```
(1) groupadd 组名 # 组的创建
```

## 文件/目录所在组
1. 概述
```
(1) 文件/目录所在组：当某个用户创建了一个文件后，默认这个文件的所在组就是该用户所在的组。
```

### 查看文件/目录所在组
1. ls -ahl 指令
```
(1) ls -ahl # 查看文件/目录所在组
```

### 修改文件所在的组
1. chgrp 指令
```
(1) chgrp 组名 文件名 # 修改文件所在的组
```

## 其他组
1. 概述
```
(1) 其他组：除去文件的所有者和所有组的用户外，系统的其他用户都是文件的其他组。
```

## 改变用户所在组
1. 概述
```
(1) 改变用户所在组：在添加用户时，可以指定将该用户添加到哪个组中，同样的用 root 的管理权限可以改变某个用户所在组。
```

### 改变用户所在组
1. 相关指令
```
(1) usermod -g 组名 用户名
(2) usermod -d 目录名 改变该用户登录的初始目录
```

## 权限管理
### 权限的基本介绍
1. ls -l 显示的内容
```
(1) -rwxrw-r-- 1 root root 1213 Feb 2 09:39 abc
```
2. 0-9 位
```
(1) 第 0 位确定文件类型(d, -, c, b)
(2) 第 1-3 位确定所有者(该文件的所有者)拥有该文件的权限。--User
(3) 第 4-6 位确定所属组(同用户组的)拥有该文件的权限。--Group
(4) 第 7-9 位确定其他用户拥有该文件的权限。--Other
```
3. 第 10 位
```
(1) 如果是文件，表示硬链接的数，如果是目录则表示该目录子目录的个数。
```
4. 文件类型
```
(1) - 普通文件
(2) d 目录
(3) l 软链接
(4) c 字符设备
(5) b 块文件(硬盘)
```
5. 时间说明
```
(1) 上面的时间表示文件最后修改时间
```

### rwx 权限详解
1. rwx 作用到文件
```
(1) r 代表可读(read)：可以读取，查看
(2) w 代表可写(write)：可以修改，但是不代表可以删除文件，删除一个文件的前提条件是对该文件所在的目录有写的权限，才能删除该文件
(3) x 代表可执行(execute)：可以被执行
```

2. rwx 作用到目录
```
(1) r 代表可读(read)：可以读取，ls 查看目录内容
(2) w 代表可写(write)：可以修改，目录内创建+删除+重命名目录
(3) x 代表可执行(excute)：可以进入该目录
```

### 文件及目录权限实际案例
1. 第一组 rwx
```
(1) 文件拥有者的权限是读、写和执行。
```
2. 第二组 rw-
```
(1) 与文件拥有者同一组的用户的权限是读、写但不能执行。
```
3. 第三组 r--
```
(1) 不与文件拥有者同组的其他用户的权限是读但不能写和执行。
```
4. 文件/目录权限的数字表示
```
(1) 可用数字表示：r = 4，w = 2，x = 1，因此 rwx = 4+2+1 = 7 。
```
5. 文件详情
```
(1) 1       # 文件：硬链接；目录；子目录数
(2) root    # 用户
(3) root    # 用户
(4) 1213    # 文件大小，如果是文件夹，显示4096字节
(5) 09:39   # 最后修改时间
(6) abc     # 文件名
```

### chmod-修改权限
#### 基本说明
1. 概述
```
(1) 通过 chmod 指令，可以修改文件或者目录的权限
```
#### 第一种方式
2. chmod 指令
```
(1) u: 所有者 g: 所有组 o: 其他人 a: 所有人
(2) chmod u=rw,g=rx,o=x 文件目录名
(3) chmod o+w 文件目录名
(4) chmod a-x 文件目录名
```

#### 第二种方式
1. chmod 指令
```
(1) 规则：r = 4，w = 2，x = 1，rwx = 4+2+1 = 7
(2) chmod u=rwx,g=rx,o=x 文件名 ==> chmod 751 文件名
```

### chown-修改文件所有者
1. chown 指令
```
(1) chown newowner file # 改变文件的所有者
(2) chown newowner:newgroup file # 改变用户的所有者和所有组
(3) -R # 如果是目录，则使其下所有子文件或目录递归生效
```

### chgrp-修改文件所在组
1. chgrp 指令
```
(1) chgrp newgroup file # 改变文件的所有组
```
